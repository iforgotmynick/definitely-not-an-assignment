<h1>BikeIndex List</h1>
<!-- All credits for this beautiful animation go to https://codepen.io/jkantner/pen/XWPbNNE -->

@if (bikes(); as bikeList) {
  <div class="search-bar">
    <input
      type="text"
      placeholder="Search bike by city"
      [(ngModel)]="searchValue"
    />
  </div>
  <div class="pagination">
    <button [disabled]="this.currentPage() <= 1" (click)="firstPage()">
      ‹‹ First
    </button>

    <button [disabled]="this.currentPage() <= 1" (click)="prevPage()">
      ‹ Prev
    </button>

    <span>Page {{ currentPage() }} of {{ allPages() }}</span>

    <button [disabled]="this.currentPage() >= allPages()" (click)="nextPage()">
      Next ›
    </button>

    <button [disabled]="this.currentPage() >= allPages()" (click)="lastPage()">
      Last ››
    </button>
  </div>
  <div class="bike-list-wrapper">
    <ul class="bike-list">
      @for (bike of bikeList.bikes; track bike.id) {
        <li class="bike-card" (click)="onBikeClick(bike)">
          <div class="bike-info">
            <h3 class="bike-title">{{ bike.title || "Untitled Bike" }}</h3>

            <div class="bike-tags">
              @for (color of bike.frame_colors; track color) {
                <span class="badge color">{{ color }}</span>
              }

              <span
                class="badge status"
                [class.stolen]="bike.stolen"
                [class.found]="!bike.stolen"
              >
                {{ bike.stolen ? "Stolen" : "Recovered" }}
              </span>
            </div>
          </div>

          @if (bike.thumb) {
            <div class="bike-thumb">
              <img [src]="bike.thumb" alt="{{ bike.title }}" />
            </div>
          }
        </li>
      }
    </ul>
  </div>
} @else {
  <!-- All credits for this beautiful animation go to https://codepen.io/jkantner/pen/XWPbNNE -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="bike"
    viewBox="0 0 48 30"
    width="48px"
    height="30px"
  >
    <g
      fill="none"
      stroke="currentColor"
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="1"
    >
      <g transform="translate(9.5,19)">
        <circle class="bike__tire" r="9" stroke-dasharray="56.549 56.549" />
        <g
          class="bike__spokes-spin"
          stroke-dasharray="31.416 31.416"
          stroke-dashoffset="-23.562"
        >
          <circle class="bike__spokes" r="5" />
          <circle class="bike__spokes" r="5" transform="rotate(180,0,0)" />
        </g>
      </g>
      <g transform="translate(24,19)">
        <g
          class="bike__pedals-spin"
          stroke-dasharray="25.133 25.133"
          stroke-dashoffset="-21.991"
          transform="rotate(67.5,0,0)"
        >
          <circle class="bike__pedals" r="4" />
          <circle class="bike__pedals" r="4" transform="rotate(180,0,0)" />
        </g>
      </g>
      <g transform="translate(38.5,19)">
        <circle
          class="bike__tire-blue"
          r="9"
          stroke-dasharray="56.549 56.549"
        />
        <g
          class="bike__spokes-spin"
          stroke-dasharray="31.416 31.416"
          stroke-dashoffset="-23.562"
        >
          <circle class="bike__spokes" r="5" />
          <circle class="bike__spokes" r="5" transform="rotate(180,0,0)" />
        </g>
      </g>
      <polyline class="bike__seat" points="14 3,18 3" stroke-dasharray="5 5" />
      <polyline
        class="bike__body"
        points="16 3,24 19,9.5 19,18 8,34 7,24 19"
        stroke-dasharray="79 79"
      />
      <path
        class="bike__handlebars"
        d="m30,2h6s1,0,1,1-1,1-1,1"
        stroke-dasharray="10 10"
      />
      <polyline
        class="bike__front"
        points="32.5 2,38.5 19"
        stroke-dasharray="19 19"
      />
    </g>
  </svg>
}
